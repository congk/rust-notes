# 切片

**切片（slice）**是 Rust 提供的另一种不持有所有权的数据类型，它允许我们引用集合中某一段**连续的**元素序列而非整个集合。

## 字符串切片

字符串切片（类型写作 `&str`）是指向 String 对象中某个连续部分的**引用**，声明语法与字符串引用声明类似。范围区间`[startIndex..endIndex]` 用于通知编译器创建一个 String 的切片引用，而非对整个字符串本身的引用（`&String`）。

```rs
let s = String::from("hello world");

let hello = &s[0..5]; // 等同于 &s[..5];
let world = &s[6..11]; // 等同于 &s[6..];
```

![](https://doc.rust-lang.org/book/img/trpl04-06.svg)

* 字符串切片的边界必须位于一个有效的 UTF-8 字符边界内，尝试从**多字节字符**的中间位置创建切片导致**运行时**错误。
* Rust 编译器可以确保引用的持续有效，如下示例：
  ```rs
  fn main() {
    let mut s = String::from("hello world");

    // 创建一个字符串切片引用，是一个不可变引用
    let word = &s[6..];

    // clear 方法需要取得该字符串的可变引用，结合引用的限制规则（可变引用与不可变引用不能同时存在），所以编译器会报错
    s.clear();

    println!("{}", word);
  }
  ```
* 字符串字面量（如`"hello"`）的类型其实也是 `&str`，它是一个指向二进制程序特定位置的切片。由于 `&str` 是一个不可变引用，所以字符串字面量本身也是不可变的。

## 其他类型切片

```rs
let a = [1, 2, 3, 4, 5];
let slice = &a[1..3]; // slice 类型为 &[i32]
```
