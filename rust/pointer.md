# 智能指针

指针（pointer）是一个通用概念，它指代哪些包含内存地址的变量。Rust 中最常用的指针是**引用**，它借用所指向的值，除此之外没有任何功能。

智能指针（smart pointer）则多是一些数据结构，它们的行为类似于指针但拥有额外的元数据和附加功能。Rust 中大多数智能指针*拥有*它们指向的数据而非简单借用。

在 Rust 中实现智能指针，需要同时实现 `Deref trait` 和 `Drop trait`:

* `Deref trait` 使智能指针结构体实例拥有与引用一致的行为。
* `Drop trait` 使你可以自定义智能指针离开作用域时运行的代码。

#### 常用智能指针

* `Box<T>`，可用于在**堆**上分配值。
* `Rc<T>`，允许多重所有权的引用技术类型。通过记录所有者的数量来使一份数据被多个所有者同时持有，并在没有任何所有者时自动清理。
* `Ref<T>` 和 `RefMut<T>`，可以通过 `RefCell<T>` 所访问，是一种可以**在运行时而非编译时执行借用规则**的类型。
